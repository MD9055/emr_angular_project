"use strict";(self.webpackChunkemr_proj=self.webpackChunkemr_proj||[]).push([[155],{8155:(G,d,r)=>{r.r(d),r.d(d,{AuthModule:()=>_});var g=r(177),l=r(670),n=r(4341),i=r(6276),c=r(1909),u=r(4796),p=r(5794);function v(o,a){1&o&&(i.j41(0,"div"),i.EFF(1," Email is required. "),i.k0s())}function f(o,a){1&o&&(i.j41(0,"div"),i.EFF(1," Please, enter valid email address. "),i.k0s())}function h(o,a){1&o&&(i.j41(0,"div"),i.EFF(1," Email must be at least 5 characters. "),i.k0s())}function F(o,a){1&o&&(i.j41(0,"div"),i.EFF(1," Email cannot exceed 50 characters. "),i.k0s())}function k(o,a){if(1&o&&(i.j41(0,"div",39),i.DNE(1,v,2,0,"div",40),i.DNE(2,f,2,0,"div",40),i.DNE(3,h,2,0,"div",40),i.DNE(4,F,2,0,"div",40),i.k0s()),2&o){const t=i.XpG();i.R7$(1),i.Y8G("ngIf",t.loginForm.get("email").errors.required),i.R7$(1),i.Y8G("ngIf",t.loginForm.get("email").errors.email),i.R7$(1),i.Y8G("ngIf",t.loginForm.get("email").errors.minlength),i.R7$(1),i.Y8G("ngIf",t.loginForm.get("email").errors.maxlength)}}function C(o,a){1&o&&(i.j41(0,"div"),i.EFF(1," Password is required. "),i.k0s())}function j(o,a){1&o&&(i.j41(0,"div"),i.EFF(1," Password must be at least 8 characters. "),i.k0s())}function b(o,a){1&o&&(i.j41(0,"div"),i.EFF(1," Password cannot exceed 20 characters. "),i.k0s())}function E(o,a){if(1&o&&(i.j41(0,"div",39),i.DNE(1,C,2,0,"div",40),i.DNE(2,j,2,0,"div",40),i.DNE(3,b,2,0,"div",40),i.k0s()),2&o){const t=i.XpG();i.R7$(1),i.Y8G("ngIf",t.loginForm.get("password").errors.required),i.R7$(1),i.Y8G("ngIf",t.loginForm.get("password").errors.minlength),i.R7$(1),i.Y8G("ngIf",t.loginForm.get("password").errors.maxlength)}}const w=function(){return["/forget-password"]},L=[{path:"",component:(()=>{class o{constructor(t,e,s,m,y){this.formBuilder=t,this.router=e,this.commonService=s,this.authService=m,this.toastrService=y,this.passwordClass=!1,this.errorMessage=""}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[n.k0.required,n.k0.email,n.k0.minLength(5),n.k0.maxLength(50)]],password:["",[n.k0.required,n.k0.minLength(8),n.k0.maxLength(20)]]})}loginFormSubmit(){if(this.loginForm.valid){const t=this.loginForm.value;console.log(t),this.commonService.post("auth/login",t).subscribe(e=>{if(200===e.statusCode){console.log(e),this.authService.login(e?.data.token);const s=this.commonService.decodeToken(e?.data?.token);console.log(s),this.toastrService.success(e.message),this.commonService.redirectBasedOnRole(s.role)}else this.toastrService.error(e.message)},e=>{this.errorMessage="Login failed. Please try again."})}else this.errorMessage="Please fill in all fields correctly."}togglePassword(){this.passwordClass=!this.passwordClass}get formControls(){return this.loginForm.controls}isValidInput(t){return this.formControls[t].touched&&this.formControls[t].valid}isInvalidInput(t){return this.formControls[t].touched&&this.formControls[t].invalid}static{this.\u0275fac=function(e){return new(e||o)(i.rXU(n.ok),i.rXU(l.Ix),i.rXU(c.h),i.rXU(u.u),i.rXU(p.tw))}}static{this.\u0275cmp=i.VBU({type:o,selectors:[["app-login"]],decls:55,vars:8,consts:[[1,"main-wrapper","login-body"],[1,"container-fluid","px-0"],[1,"row"],[1,"col-lg-6","login-wrap"],[1,"login-sec"],[1,"log-img"],["src","assets/img/login-02.png","alt","Logo",1,"img-fluid"],[1,"col-lg-6","login-wrap-bg"],[1,"login-wrapper"],[1,"loginbox"],[1,"login-right"],[1,"login-right-wrap"],[1,"account-logo"],["src","assets/img/login-logo.png","alt",""],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Email"],[1,"login-danger"],["formControlName","email","type","text",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","Password"],["formControlName","password",1,"form-control","pass-input",3,"type"],["tabindex","0",1,"profile-views","toggle-password",3,"ngClass","click","keyup.enter"],[1,"forgotpass"],[1,"remember-me"],[1,"custom_check","mr-2","mb-0","d-inline-flex","remember-me"],["type","checkbox","name","radio"],[1,"checkmark"],[3,"routerLink"],[1,"form-group","login-btn"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"next-sign"],[1,"account-subtitle"],["routerLink","/register"],[1,"social-login"],["href","javascript:;"],["src","assets/img/icons/login-icon-01.svg","alt",""],["src","assets/img/icons/login-icon-02.svg","alt",""],["src","assets/img/icons/login-icon-03.svg","alt",""],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,s){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),i.nrm(6,"img",6),i.k0s()()(),i.j41(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),i.nrm(13,"img",13),i.k0s(),i.j41(14,"h2"),i.EFF(15,"Login"),i.k0s(),i.j41(16,"form",14),i.bIt("ngSubmit",function(){return s.loginFormSubmit()}),i.j41(17,"div",15)(18,"label",16),i.EFF(19,"Email "),i.j41(20,"span",17),i.EFF(21,"*"),i.k0s()(),i.nrm(22,"input",18),i.DNE(23,k,5,4,"div",19),i.k0s(),i.j41(24,"div",15)(25,"label",20),i.EFF(26,"Password "),i.j41(27,"span",17),i.EFF(28,"*"),i.k0s()(),i.nrm(29,"input",21),i.j41(30,"span",22),i.bIt("click",function(){return s.togglePassword()})("keyup.enter",function(){return s.togglePassword()}),i.k0s(),i.DNE(31,E,4,3,"div",19),i.k0s(),i.j41(32,"div",23)(33,"div",24)(34,"label",25),i.EFF(35," Remember me "),i.nrm(36,"input",26)(37,"span",27),i.k0s()(),i.j41(38,"a",28),i.EFF(39,"Forgot Password?"),i.k0s()(),i.j41(40,"div",29)(41,"button",30),i.EFF(42," Login "),i.k0s()()(),i.j41(43,"div",31)(44,"p",32),i.EFF(45," Need an account? "),i.j41(46,"a",33),i.EFF(47,"Sign Up"),i.k0s()(),i.j41(48,"div",34)(49,"a",35),i.nrm(50,"img",36),i.k0s(),i.j41(51,"a",35),i.nrm(52,"img",37),i.k0s(),i.j41(53,"a",35),i.nrm(54,"img",38),i.k0s()()()()()()()()()()()),2&e&&(i.R7$(16),i.Y8G("formGroup",s.loginForm),i.R7$(7),i.Y8G("ngIf",s.isInvalidInput("email")),i.R7$(6),i.Y8G("type",s.passwordClass?"text":"password"),i.R7$(1),i.Y8G("ngClass",s.passwordClass?"feather icon-eye":"feather icon-eye-off"),i.R7$(1),i.Y8G("ngIf",s.isInvalidInput("password")),i.R7$(7),i.Y8G("routerLink",i.lJ4(7,w)),i.R7$(3),i.Y8G("disabled",s.loginForm.invalid))},dependencies:[g.YU,g.bT,l.Wk,n.qT,n.me,n.BC,n.cb,n.j4,n.JD]})}}return o})()}];let I=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=i.$C({type:o})}static{this.\u0275inj=i.G2t({imports:[l.iI.forChild(L),l.iI]})}}return o})(),_=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=i.$C({type:o})}static{this.\u0275inj=i.G2t({imports:[g.MD,I,n.YN,n.X1]})}}return o})()}}]);